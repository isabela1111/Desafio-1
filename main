#include <QFile>
#include <QString>
#include <QByteArray>
#include <cstring>
using namespace std;

char** detectarArchivosDeEnmascaramiento(int& cantidad) {
    // Funcion que detecta archivos .txt con las pistas que se proporcionan
    int capacidad = 10;
    char** archivos = new char*[capacidad];
    cantidad = 0;

    for (int i = 1;; ++i) {
        QString nombre = QString("M%1.txt").arg(i);
        QFile archivo(nombre);

        if (!archivo.exists()) break;

        QByteArray nombreBytes = nombre.toLocal8Bit();
        archivos[cantidad] = new char[nombreBytes.size() + 1];
        strcpy(archivos[cantidad], nombreBytes.constData());
        cantidad++;

        if (cantidad == capacidad) {
            int nuevaCapacidad = capacidad * 2;
            char** nuevo = new char*[nuevaCapacidad];
            for (int j = 0; j < cantidad; ++j) {
                nuevo[j] = archivos[j];
            }
            delete[] archivos;
            archivos = nuevo;
            capacidad = nuevaCapacidad;
        }
    }

    return archivos;
}
